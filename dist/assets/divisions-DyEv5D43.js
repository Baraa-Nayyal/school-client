var Z=Object.defineProperty;var E=(v,t,o)=>t in v?Z(v,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):v[t]=o;var c=(v,t,o)=>E(v,typeof t!="symbol"?t+"":t,o);import{u as H}from"./DivisionsStore-CKR-eWiE.js";import{V as j,a as A,_ as O}from"./Page.vue_vue_type_style_index_0_lang-kzY2xtbw.js";import{n as Q,r as C,a7 as Y,S as h,J as ee,j as x,q as g,w as l,t as d,h as s,a8 as U,W as r,a9 as V,X as m,z as i,K as S,Z as _,$ as B,s as I,U as se}from"./index-LJo3mpdx.js";import{V as T}from"./VTextField-CPNM6cuh.js";import{V as $,a as le}from"./VDataTable-D2ofMP5e.js";class z{constructor(){c(this,"name");c(this,"_id")}}class L{constructor(){c(this,"_id");c(this,"name");c(this,"divisionsIds")}}const te={class:"flex gap-6 justify-between w-full"},ae={class:"flex justify-between p-5"},ie={class:"p-5 text-lg flex justify-between items-center font-bold"},oe={class:"p-2"},ne={class:"d-flex gap-1 justify-center"},de={class:"flex justify-between p-5"},ue={class:"p-5 text-lg flex justify-between items-center font-bold"},re={class:"p-2"},ve={class:"d-flex gap-1 justify-center"},Ve=Q({__name:"divisions",setup(v){const t=H(),o=C(new z),n=C(new L),y=Y(),{divisionsList:b,classesList:P}=h(t),G=()=>{const u=o.value._id;u?(t.UpdateDivision(u,o.value),w()):t.AddDivision(o.value).then(e=>{console.log(b.value),console.log("res ",e==null?void 0:e.data),y.success("done"),w()})},R=()=>{const u=n.value._id;u?(t.UpdateClass(u,n.value),k()):t.AddClass(n.value).then(()=>{y.success("done"),k()})},q=C(null),F=()=>{se().SetPageMeta({breadCrumb:[],icon:"ri-building-2-line",title:"Classes & Divisions"}),t.GetAllDivisions(),t.GetAllClasses()},N=[{title:"Name",key:"name"},{title:"Details",value:"actions",align:"center"}];F();const f=C(!1),p=C(!1),J=u=>{o.value={...u},f.value=!0},K=u=>{n.value={...u},p.value=!0},w=()=>{f.value=!1,o.value=new z},k=()=>{p.value=!1,n.value=new L},M=()=>{p.value=!1,t.DeleteClass(n.value._id).then(()=>{})},W=()=>{f.value=!1,t.DeleteDivision(o.value._id).then(()=>{})};return(u,e)=>{const D=ee("IconBtn");return x(),g(O,{"has-search":!1,ref_key:"DivisionsPage",ref:q,icon:"tabler-user",add:!1},{default:l(()=>[d("div",te,[s(_,{class:"w-full h-fit"},{default:l(()=>[d("div",ae,[s(U,null,{default:l(()=>e[7]||(e[7]=[r("Divisions")])),_:1}),s(V,null,{default:l(()=>[s(m,{onClick:e[0]||(e[0]=a=>f.value=!0),variant:"elevated"},{default:l(()=>e[8]||(e[8]=[r("Add Division ")])),_:1})]),_:1}),s(j,{modelValue:i(f),"onUpdate:modelValue":e[2]||(e[2]=a=>S(f)?f.value=a:null),scrollable:"",persistent:"",color:"primary",width:400},{default:l(()=>[s(_,null,{default:l(()=>[d("div",ie,[e[9]||(e[9]=d("div",null,"New Division",-1)),s(D,{icon:"tabler-x",variant:"plain",class:"flex z-50"})]),d("main",oe,[s(T,{label:"Division Name",modelValue:i(o).name,"onUpdate:modelValue":e[1]||(e[1]=a=>i(o).name=a)},null,8,["modelValue"])]),s(A),s(V,{class:"m-2"},{default:l(()=>[s(m,{onClick:G,variant:"flat"},{default:l(()=>e[10]||(e[10]=[r(" Save ")])),_:1}),s(m,{variant:"tonal",onClick:w},{default:l(()=>e[11]||(e[11]=[r(" Cancel ")])),_:1}),i(o)._id?(x(),g(m,{key:0,variant:"tonal",color:"error",onClick:W},{default:l(()=>e[12]||(e[12]=[r(" Delete ")])),_:1})):B("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s(i($),{"items-per-page":-1,items:i(b),headers:N},{"item.actions":l(({item:a})=>[d("div",ne,[s(D,{onClick:X=>J(a)},{default:l(()=>[s(I,{icon:"ri-home-smile-line"})]),_:2},1032,["onClick"])])]),_:1},8,["items","headers"])]),_:1}),s(_,{class:"w-full h-fit"},{default:l(()=>[d("div",de,[s(U,null,{default:l(()=>e[13]||(e[13]=[r("Classes")])),_:1}),s(V,null,{default:l(()=>[s(m,{onClick:e[3]||(e[3]=a=>p.value=!0),variant:"elevated"},{default:l(()=>e[14]||(e[14]=[r("Add Class ")])),_:1})]),_:1}),s(j,{modelValue:i(p),"onUpdate:modelValue":e[6]||(e[6]=a=>S(p)?p.value=a:null),scrollable:"",persistent:"",color:"primary",width:400},{default:l(()=>[s(_,null,{default:l(()=>[d("div",ue,[e[15]||(e[15]=d("div",null,"New Class",-1)),s(D,{icon:"tabler-x",variant:"plain",class:"flex z-50"})]),d("main",re,[s(T,{label:"Class Name",modelValue:i(n).name,"onUpdate:modelValue":e[4]||(e[4]=a=>i(n).name=a)},null,8,["modelValue"]),s(le,{class:"mt-4",label:"Division Name",multiple:"",modelValue:i(n).divisionsIds,"onUpdate:modelValue":e[5]||(e[5]=a=>i(n).divisionsIds=a),"item-title":"name","item-value":"_id",items:i(b)},null,8,["modelValue","items"])]),s(A),s(V,{class:"m-2"},{default:l(()=>[s(m,{onClick:R,variant:"flat"},{default:l(()=>e[16]||(e[16]=[r(" Save ")])),_:1}),s(m,{variant:"tonal",onClick:k},{default:l(()=>e[17]||(e[17]=[r(" Cancel ")])),_:1}),i(n)._id?(x(),g(m,{key:0,variant:"tonal",color:"error",onClick:M},{default:l(()=>e[18]||(e[18]=[r(" Delete ")])),_:1})):B("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s(i($),{"items-per-page":-1,items:i(P),headers:N},{"item.actions":l(({item:a})=>[d("div",ve,[s(D,{onClick:X=>K(a)},{default:l(()=>[s(I,{icon:"ri-home-smile-line"})]),_:2},1032,["onClick"])])]),_:1},8,["items","headers"])]),_:1})])]),_:1},512)}}});export{Ve as default};
