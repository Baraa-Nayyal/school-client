import{_ as N,V as w}from"./VDataTable-CCJl_ig7.js";import{e as D,L as P,r as v,c as h,f as k,i as I,w as o,B as L,M,N as T,C as j,j as u,d as t,l as a,O as i,P as x,t as r,V as R}from"./index-DOiLiAGW.js";import{u as U,A as $}from"./dto-CIjScN1s.js";import{V as f,a as _,b as d}from"./VTextField-DeKW-4cg.js";import"./VOverlay-A_z2X8Te.js";import"./forwardRefs-cf9lWiri.js";import"./transition-PVbPGmxI.js";import"./VImg-CgLEQQ14.js";const G={class:"flex gap-4 items-center justify-center mb-10"},F={class:"flex gap-3"},O={class:"py-4 flex gap-2"},q={class:"d-flex gap-1 justify-center"},te=D({__name:"[id]",setup(z){const g=L(),y=M(),b=g.params.id,m=U(),{invoiceDetails:n}=P(m),s=v(new $);(()=>{T().SetPageMeta({breadCrumb:[],icon:"ri-home-smile-line",title:"تفاصيل الفاتورة "}),m.GetInvoiceById(b).then(()=>{n.value=n.value})})();const V=v(null),A=()=>{m.AddPayment({...s.value,invoiceId:b})},B=()=>{var c;(c=V.value)==null||c.closeDialog()},C=[{title:"المدفوع من الأوتوكار",value:"paidBusAmount"},{title:"المدفوع من القسط",value:"paidSchoolAmount"},{title:"date",value:"date"}];return h(()=>{}),(c,l)=>{const S=j("IconBtn");return k(),I(N,{ref_key:"Pagey",ref:V,"has-search":!1,icon:"ri-home-smile-line","button-text":"إضافة دفعة"},{"dialog-form":o(()=>[u("div",F,[t(f,{label:"المدفوع من الأوتوكار",type:"number",modelValue:a(s).paidBusAmount,"onUpdate:modelValue":l[0]||(l[0]=e=>a(s).paidBusAmount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t(f,{label:"المدفوع من القسط",type:"number",modelValue:a(s).paidSchoolAmount,"onUpdate:modelValue":l[1]||(l[1]=e=>a(s).paidSchoolAmount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t(f,{label:"رقم الوصل",class:"w-4",type:"number",modelValue:a(s).receiptNumber,"onUpdate:modelValue":l[2]||(l[2]=e=>a(s).receiptNumber=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),u("div",O,[t(x,{onClick:A},{default:o(()=>l[3]||(l[3]=[i("إضافة")])),_:1}),t(x,{onClick:B,variant:"outlined"},{default:o(()=>l[4]||(l[4]=[i("رجوع")])),_:1})])]),default:o(()=>[u("div",G,[t(d,{title:"القسط الأجمالي"},{default:o(()=>[t(_,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(r(Number((e=a(n))==null?void 0:e.totalAmount).toLocaleString()),1)]}),_:1})]),_:1}),t(d,{title:"القسط المدفوع"},{default:o(()=>[t(_,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(r(Number((e=a(n))==null?void 0:e.totalPaid).toLocaleString()),1)]}),_:1})]),_:1}),t(d,{title:"القسط المتبقي"},{default:o(()=>[t(_,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(r(Number((e=a(n))==null?void 0:e.remainingAmount).toLocaleString()),1)]}),_:1})]),_:1})]),t(d,{title:"الدفعات"},{default:o(()=>{var e;return[t(w,{headers:C,items:(e=a(n))==null?void 0:e.payments},{"item.actions":o(({item:p})=>[u("div",q,[t(S,{onClick:H=>a(y).push(`students/${p._id}`)},{default:o(()=>[t(R,{icon:"ri-home-smile-line"})]),_:2},1032,["onClick"])])]),"item.date":o(({item:p})=>[i(r(new Date(p.date).toLocaleDateString("en-GB")),1)]),_:1},8,["items"])]}),_:1})]),_:1},512)}}});export{te as default};
