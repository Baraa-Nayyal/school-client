import{_ as C}from"./Page.vue_vue_type_style_index_0_lang-kzY2xtbw.js";import{n as h,S as D,r as V,d as I,j as N,q as w,w as o,I as k,T,U as L,J as R,t as u,h as t,z as a,W as i,X as x,Y as f,v as d,Z as r,s as M}from"./index-LJo3mpdx.js";import{u as U,A as j}from"./dto-oepiV8Zy.js";import{V as _}from"./VTextField-CPNM6cuh.js";import{V as $}from"./VDataTable-D2ofMP5e.js";const G={class:"flex gap-4 items-center justify-center mb-10"},q={class:"flex gap-3"},z={class:"py-4 flex gap-2"},F={class:"d-flex gap-1 justify-center"},O=h({__name:"[id]",setup(J){const g=k(),y=T(),b=g.params.id,m=U(),{invoiceDetails:n}=D(m),s=V(new j);(()=>{L().SetPageMeta({breadCrumb:[],icon:"ri-home-smile-line",title:"Invoice Details "}),m.GetInvoiceById(b).then(()=>{n.value=n.value})})();const v=V(null),S=()=>{m.AddPayment({...s.value,invoiceId:b})},A=()=>{var c;(c=v.value)==null||c.closeDialog()},B=[{title:"Paid Bus",value:"paidBusAmount"},{title:"Paid School",value:"paidSchoolAmount"},{title:"date",value:"date"}];return I(()=>{}),(c,l)=>{const P=R("IconBtn");return N(),w(C,{ref_key:"Pagey",ref:v,"has-search":!1,icon:"ri-home-smile-line","button-text":"إضافة دفعة"},{"dialog-form":o(()=>[u("div",q,[t(_,{label:"Paid Bus",type:"number",modelValue:a(s).paidBusAmount,"onUpdate:modelValue":l[0]||(l[0]=e=>a(s).paidBusAmount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t(_,{label:"Paid School",type:"number",modelValue:a(s).paidSchoolAmount,"onUpdate:modelValue":l[1]||(l[1]=e=>a(s).paidSchoolAmount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t(_,{label:"Receipt Number",class:"w-4",type:"number",modelValue:a(s).receiptNumber,"onUpdate:modelValue":l[2]||(l[2]=e=>a(s).receiptNumber=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),u("div",z,[t(x,{onClick:S},{default:o(()=>l[3]||(l[3]=[i("Add")])),_:1}),t(x,{onClick:A,variant:"outlined"},{default:o(()=>l[4]||(l[4]=[i("Cancel")])),_:1})])]),default:o(()=>[u("div",G,[t(r,{title:"Total"},{default:o(()=>[t(f,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(d(Number((e=a(n))==null?void 0:e.totalAmount).toLocaleString()),1)]}),_:1})]),_:1}),t(r,{title:"Paid"},{default:o(()=>[t(f,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(d(Number((e=a(n))==null?void 0:e.totalPaid).toLocaleString()),1)]}),_:1})]),_:1}),t(r,{title:"Remaining"},{default:o(()=>[t(f,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(d(Number((e=a(n))==null?void 0:e.remainingAmount).toLocaleString()),1)]}),_:1})]),_:1})]),t(r,{title:"Payments"},{default:o(()=>{var e;return[t($,{headers:B,items:(e=a(n))==null?void 0:e.payments},{"item.actions":o(({item:p})=>[u("div",F,[t(P,{onClick:X=>a(y).push(`students/${p._id}`)},{default:o(()=>[t(M,{icon:"ri-home-smile-line"})]),_:2},1032,["onClick"])])]),"item.date":o(({item:p})=>[i(d(new Date(p.date).toLocaleDateString("en-GB")),1)]),_:1},8,["items"])]}),_:1})]),_:1},512)}}});export{O as default};
