import{_ as C}from"./Page.vue_vue_type_style_index_0_lang-BrMk8xb6.js";import{j as h,R as D,r as v,d as I,k as N,n as k,w as o,H as w,S as T,T as L,I as R,s as u,h as t,y as a,U as i,W as x,X as f,t as d,Y as r,q as M}from"./index-Ba3BICnt.js";import{u as U,A as j}from"./dto-CFSz8hln.js";import{V as _}from"./VTextField-BOn5SMjg.js";import{V as $}from"./VDataTable-Bq6jX6ou.js";const G={class:"flex gap-4 items-center justify-center mb-10"},q={class:"flex gap-3"},F={class:"py-4 flex gap-2"},H={class:"d-flex gap-1 justify-center"},Q=h({__name:"[id]",setup(W){const y=w(),g=T(),b=y.params.id,m=U(),{invoiceDetails:n}=D(m),s=v(new j);(()=>{L().SetPageMeta({breadCrumb:[],icon:"ri-home-smile-line",title:"Invoice Details "}),m.GetInvoiceById(b).then(()=>{n.value=n.value})})();const V=v(null),S=()=>{m.AddPayment({...s.value,invoiceId:b})},A=()=>{var c;(c=V.value)==null||c.closeDialog()},B=[{title:"Paid Bus",value:"paidBusAmount"},{title:"Paid School",value:"paidSchoolAmount"},{title:"date",value:"date"}];return I(()=>{}),(c,l)=>{const P=R("IconBtn");return N(),k(C,{ref_key:"Pagey",ref:V,"has-search":!1,icon:"ri-home-smile-line","button-text":"إضافة دفعة"},{"dialog-form":o(()=>[u("div",q,[t(_,{label:"Paid Bus",type:"number",modelValue:a(s).paidBusAmount,"onUpdate:modelValue":l[0]||(l[0]=e=>a(s).paidBusAmount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t(_,{label:"Paid School",type:"number",modelValue:a(s).paidSchoolAmount,"onUpdate:modelValue":l[1]||(l[1]=e=>a(s).paidSchoolAmount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t(_,{label:"Receipt Number",class:"w-4",type:"number",modelValue:a(s).receiptNumber,"onUpdate:modelValue":l[2]||(l[2]=e=>a(s).receiptNumber=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),u("div",F,[t(x,{onClick:S},{default:o(()=>l[3]||(l[3]=[i("Add")])),_:1}),t(x,{onClick:A,variant:"outlined"},{default:o(()=>l[4]||(l[4]=[i("Cancel")])),_:1})])]),default:o(()=>[u("div",G,[t(r,{title:"Total"},{default:o(()=>[t(f,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(d(Number((e=a(n))==null?void 0:e.totalAmount).toLocaleString()),1)]}),_:1})]),_:1}),t(r,{title:"Paid"},{default:o(()=>[t(f,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(d(Number((e=a(n))==null?void 0:e.totalPaid).toLocaleString()),1)]}),_:1})]),_:1}),t(r,{title:"Remaining"},{default:o(()=>[t(f,{class:"text-center mx-auto w-full"},{default:o(()=>{var e;return[i(d(Number((e=a(n))==null?void 0:e.remainingAmount).toLocaleString()),1)]}),_:1})]),_:1})]),t(r,{title:"Payments"},{default:o(()=>{var e;return[t($,{headers:B,items:(e=a(n))==null?void 0:e.payments},{"item.actions":o(({item:p})=>[u("div",H,[t(P,{onClick:Y=>a(g).push(`students/${p._id}`)},{default:o(()=>[t(M,{icon:"ri-home-smile-line"})]),_:2},1032,["onClick"])])]),"item.date":o(({item:p})=>[i(d(new Date(p.date).toLocaleDateString("en-GB")),1)]),_:1},8,["items"])]}),_:1})]),_:1},512)}}});export{Q as default};
